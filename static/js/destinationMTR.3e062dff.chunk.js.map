{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","svgs/strip/strip-mtr.tsx","svgs/destination/destination-mtr.tsx"],"names":["_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","React","props","fill","height","style","width","stripPc","DestinationMTR","DefsMTR","InfoMTR","id","d","ParamContext","param","routes","destNames","customiseMTRDest","terminal","validDests","Array","from","Set","filter","route","includes","current_stn_idx","map","res","stnId","direction","reverse","stn_list","name","join","replace","destNameEl","bBox","setBBox","current","getBBox","toString","isLegacy","flagLength","arrowX","svgWidth","destination","platformNumX","destNameX","xlinkHref","transform","PlatformNum","num","platform_num","ref","textAnchor","className","fontSize","line_name","dy","others","cx","cy","r"],"mappings":"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","file":"static/js/destinationMTR.3e062dff.chunk.js","sourcesContent":["import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import * as React from 'react';\n\nexport default React.memo(function StripMTR(props: { stripPc: number }) {\n    return (\n        <rect\n            fill=\"var(--rmg-theme-colour)\"\n            height={20}\n            style={{\n                width: 'var(--rmg-svg-width)',\n                ['--strip-percentage' as any]: props.stripPc,\n                transform: `translateY(calc(var(--strip-percentage, 95) * var(--rmg-svg-height) / 100 - 10px))`,\n            }}\n        />\n    );\n});\n","import * as React from 'react';\n\nimport { ParamContext } from '../../context';\nimport StripMTR from '../strip/strip-mtr';\n\nconst DestinationMTR = React.memo(() => (\n    <>\n        <DefsMTR />\n        <StripMTR stripPc={90} />\n        <InfoMTR />\n    </>\n));\n\nexport default DestinationMTR;\n\nconst DefsMTR = React.memo(() => (\n    <defs>\n        <path\n            id=\"arrow\"\n            d=\"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z\"\n            fill=\"var(--rmg-black,#000)\"\n        />\n    </defs>\n));\n\nconst InfoMTR = () => {\n    const { param, routes } = React.useContext(ParamContext);\n\n    let destNames = ['', ''];\n    if (param.customiseMTRDest.terminal !== false) {\n        destNames = param.customiseMTRDest.terminal;\n    } else {\n        const validDests = Array.from(\n            new Set(\n                routes\n                    .filter(route => route.includes(param.current_stn_idx))\n                    .map(route => {\n                        let res = route.filter(stnId => !['linestart', 'lineend'].includes(stnId));\n                        return param.direction === 'l' ? res[0] : res.reverse()[0];\n                    })\n            )\n        );\n        destNames = [\n            validDests.map(stnId => param.stn_list[stnId].name[0]).join('/'),\n            validDests\n                .map(stnId => param.stn_list[stnId].name[1])\n                .join('/')\n                .replace('\\\\', ' '),\n        ];\n    }\n\n    const destNameEl = React.useRef<SVGGElement>();\n    const [bBox, setBBox] = React.useState({ width: 0 } as DOMRect);\n    React.useEffect(() => setBBox(destNameEl.current.getBBox()), [\n        destNames.toString(),\n        param.customiseMTRDest.isLegacy,\n    ]);\n\n    const flagLength = 160 + 150 + bBox.width + 45 + 50;\n    const arrowX = (param.svgWidth.destination - (param.direction === 'l' ? 1 : -1) * flagLength) / 2;\n    const platformNumX = arrowX + (param.direction === 'l' ? 1 : -1) * (160 + 50 + 75);\n    const destNameX = platformNumX + (param.direction === 'l' ? 1 : -1) * (75 + 45);\n\n    return (\n        <g id=\"dest_name\">\n            <use\n                xlinkHref=\"#arrow\"\n                style={{ transform: `translateX(${arrowX}px)rotate(${param.direction === 'l' ? 0 : 180}deg)` }}\n            />\n            <PlatformNum num={param.platform_num} transform={`translate(${platformNumX},0)`} />\n            <g\n                ref={destNameEl}\n                textAnchor={param.direction === 'l' ? 'start' : 'end'}\n                transform={`translate(${destNameX},-25)`}\n            >\n                <text className=\"rmg-name__zh\" fontSize={90}>\n                    {(param.customiseMTRDest.isLegacy ? param.line_name[0] : '') + 'å¾€' + destNames[0]}\n                </text>\n                <text className=\"rmg-name__en\" fontSize={45} dy={80}>\n                    {(param.customiseMTRDest.isLegacy ? param.line_name[1] + ' ' : '') + 'to ' + destNames[1]}\n                </text>\n            </g>\n        </g>\n    );\n};\n\nconst PlatformNum = (props: { num: string } & React.SVGProps<SVGGElement>) => {\n    const { num, ...others } = props;\n\n    return (\n        <g id=\"platform\" {...others}>\n            {React.useMemo(\n                () => (\n                    <>\n                        <circle cx={0} cy={0} r={75} />\n                        <text className=\"rmg-name__zh\" dy={0}>\n                            {num}\n                        </text>\n                    </>\n                ),\n                [num]\n            )}\n        </g>\n    );\n};\n"],"sourceRoot":""}