{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","svgs/strip/strip-mtr.tsx","svgs/destination/destination-mtr.tsx"],"names":["_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","memo","props","fill","height","style","width","stripPc","React","DefsMTR","InfoMTR","id","d","useContext","ParamContext","param","routes","destNames","customiseMTRDest","terminal","validDests","Array","from","Set","filter","route","includes","current_stn_idx","map","res","stnId","direction","reverse","stn_list","name","join","replace","destNameEl","useRef","useState","bBox","setBBox","useEffect","current","getBBox","toString","isLegacy","flagLength","arrowX","svgWidth","destination","platformNumX","destNameX","xlinkHref","transform","PlatformNum","num","platform_num","ref","textAnchor","className","fontSize","line_name","dy","others","useMemo","cx","cy","r"],"mappings":"gIACe,SAASA,EAAyBC,EAAQC,GACvD,GAAc,MAAVD,EAAgB,MAAO,GAC3B,IACIE,EAAKC,EADLC,ECHS,SAAuCJ,EAAQC,GAC5D,GAAc,MAAVD,EAAgB,MAAO,GAC3B,IAEIE,EAAKC,EAFLC,EAAS,GACTC,EAAaC,OAAOC,KAAKP,GAG7B,IAAKG,EAAI,EAAGA,EAAIE,EAAWG,OAAQL,IACjCD,EAAMG,EAAWF,GACbF,EAASQ,QAAQP,IAAQ,IAC7BE,EAAOF,GAAOF,EAAOE,IAGvB,OAAOE,EDTM,CAA6BJ,EAAQC,GAGlD,GAAIK,OAAOI,sBAAuB,CAChC,IAAIC,EAAmBL,OAAOI,sBAAsBV,GAEpD,IAAKG,EAAI,EAAGA,EAAIQ,EAAiBH,OAAQL,IACvCD,EAAMS,EAAiBR,GACnBF,EAASQ,QAAQP,IAAQ,GACxBI,OAAOM,UAAUC,qBAAqBC,KAAKd,EAAQE,KACxDE,EAAOF,GAAOF,EAAOE,IAIzB,OAAOE,EAjBT,mC,2DEEeW,oBAAK,SAAkBC,GAA6B,IAAD,EAC9D,OACI,0BACIC,KAAK,0BACLC,OAAQ,GACRC,OAAK,GACDC,MAAO,wBADN,cAEA,qBAA8BJ,EAAMK,SAFpC,yH,yFCFFC,cAAMP,MAAK,WACtB,OACI,oCACI,kBAACQ,EAAD,MACA,kBAAC,IAAD,CAAUF,QAAS,KACnB,kBAACG,EAAD,UAKZ,IAAMD,EAAUD,IAAMP,MAAK,kBACvB,8BACI,0BACIU,GAAG,QACHC,EAAE,kEACFT,KAAK,8BAKXO,EAAU,WAAO,IAAD,EACQF,IAAMK,WAAWC,KAAnCC,EADU,EACVA,MAAOC,EADG,EACHA,OAEXC,EAAY,CAAC,GAAI,IACrB,IAAwC,IAApCF,EAAMG,iBAAiBC,SACvBF,EAAYF,EAAMG,iBAAiBC,aAChC,CACH,IAAMC,EAAaC,MAAMC,KACrB,IAAIC,IACAP,EACKQ,QAAO,SAAAC,GAAK,OAAIA,EAAMC,SAASX,EAAMY,oBACrCC,KAAI,SAAAH,GACD,IAAII,EAAMJ,EAAMD,QAAO,SAAAM,GAAK,OAAK,CAAC,YAAa,WAAWJ,SAASI,MACnE,MAA2B,MAApBf,EAAMgB,UAAoBF,EAAI,GAAKA,EAAIG,UAAU,QAIxEf,EAAY,CACRG,EAAWQ,KAAI,SAAAE,GAAK,OAAIf,EAAMkB,SAASH,GAAOI,KAAK,MAAIC,KAAK,KAC5Df,EACKQ,KAAI,SAAAE,GAAK,OAAIf,EAAMkB,SAASH,GAAOI,KAAK,MACxCC,KAAK,KACLC,QAAQ,KAAM,MAI3B,IAAMC,EAAa7B,IAAM8B,OAA2B,MA1BlC,EA2BM9B,IAAM+B,SAAS,CAAEjC,MAAO,IA3B9B,mBA2BXkC,EA3BW,KA2BLC,EA3BK,KA4BlBjC,IAAMkC,WACF,kBAAMD,EAAQJ,EAAWM,QAASC,aAElC,CAAC3B,EAAU4B,WAAY9B,EAAMG,iBAAiB4B,WAGlD,IAAMC,EAAa,IAAYP,EAAKlC,MAAQ,GAAK,GAC3C0C,GAAUjC,EAAMkC,SAASC,aAAmC,MAApBnC,EAAMgB,UAAoB,GAAK,GAAKgB,GAAc,EAC1FI,EAAeH,EAAS,KAAqB,MAApBjC,EAAMgB,UAAoB,GAAK,GACxDqB,EAAYD,EAAe,KAAqB,MAApBpC,EAAMgB,UAAoB,GAAK,GAEjE,OACI,uBAAGpB,GAAG,aACF,yBACI0C,UAAU,SACVhD,MAAO,CAAEiD,UAAU,cAAD,OAAgBN,EAAhB,qBAAuD,MAApBjC,EAAMgB,UAAoB,EAAI,IAAjE,WAEtB,kBAACwB,EAAD,CAAaC,IAAKzC,EAAM0C,aAAcH,UAAS,oBAAeH,EAAf,SAC/C,uBACIO,IAAKrB,EACLsB,WAAgC,MAApB5C,EAAMgB,UAAoB,QAAU,MAChDuB,UAAS,oBAAeF,EAAf,UAET,0BAAMQ,UAAU,eAAeC,SAAU,KACnC9C,EAAMG,iBAAiB4B,SAAW/B,EAAM+C,UAAU,GAAK,IAAM,SAAM7C,EAAU,IAEnF,0BAAM2C,UAAU,eAAeC,SAAU,GAAIE,GAAI,KAC3ChD,EAAMG,iBAAiB4B,SAAW/B,EAAM+C,UAAU,GAAK,IAAM,IAAM,MAAQ7C,EAAU,OAOrGsC,EAAc,SAACrD,GAA0D,IACnEsD,EAAmBtD,EAAnBsD,IAAQQ,EAD0D,YAC/C9D,EAD+C,SAG1E,OACI,qCAAGS,GAAG,YAAeqD,GAChBxD,IAAMyD,SACH,kBACI,oCACI,4BAAQC,GAAI,EAAGC,GAAI,EAAGC,EAAG,KACzB,0BAAMR,UAAU,eAAeG,GAAI,GAC9BP,MAIb,CAACA","file":"static/js/destinationMTR.ae0735fa.chunk.js","sourcesContent":["import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React, { memo } from 'react';\n\nexport default memo(function StripMTR(props: { stripPc: number }) {\n    return (\n        <rect\n            fill=\"var(--rmg-theme-colour)\"\n            height={20}\n            style={{\n                width: 'var(--rmg-svg-width)',\n                ['--strip-percentage' as any]: props.stripPc,\n                transform: `translateY(calc(var(--strip-percentage, 95) * var(--rmg-svg-height) / 100 - 10px))`,\n            }}\n        />\n    );\n});\n","import React from 'react';\n\nimport { ParamContext } from '../../context';\nimport StripMTR from '../strip/strip-mtr';\n\nexport default React.memo(function DestinationMTR() {\n    return (\n        <>\n            <DefsMTR />\n            <StripMTR stripPc={90} />\n            <InfoMTR />\n        </>\n    );\n});\n\nconst DefsMTR = React.memo(() => (\n    <defs>\n        <path\n            id=\"arrow\"\n            d=\"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z\"\n            fill=\"var(--rmg-black,#000)\"\n        />\n    </defs>\n));\n\nconst InfoMTR = () => {\n    const { param, routes } = React.useContext(ParamContext);\n\n    let destNames = ['', ''];\n    if (param.customiseMTRDest.terminal !== false) {\n        destNames = param.customiseMTRDest.terminal;\n    } else {\n        const validDests = Array.from(\n            new Set(\n                routes\n                    .filter(route => route.includes(param.current_stn_idx))\n                    .map(route => {\n                        let res = route.filter(stnId => !['linestart', 'lineend'].includes(stnId));\n                        return param.direction === 'l' ? res[0] : res.reverse()[0];\n                    })\n            )\n        );\n        destNames = [\n            validDests.map(stnId => param.stn_list[stnId].name[0]).join('/'),\n            validDests\n                .map(stnId => param.stn_list[stnId].name[1])\n                .join('/')\n                .replace('\\\\', ' '),\n        ];\n    }\n\n    const destNameEl = React.useRef<SVGGElement | null>(null);\n    const [bBox, setBBox] = React.useState({ width: 0 } as DOMRect);\n    React.useEffect(\n        () => setBBox(destNameEl.current!.getBBox()),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [destNames.toString(), param.customiseMTRDest.isLegacy]\n    );\n\n    const flagLength = 160 + 150 + bBox.width + 45 + 50;\n    const arrowX = (param.svgWidth.destination - (param.direction === 'l' ? 1 : -1) * flagLength) / 2;\n    const platformNumX = arrowX + (param.direction === 'l' ? 1 : -1) * (160 + 50 + 75);\n    const destNameX = platformNumX + (param.direction === 'l' ? 1 : -1) * (75 + 45);\n\n    return (\n        <g id=\"dest_name\">\n            <use\n                xlinkHref=\"#arrow\"\n                style={{ transform: `translateX(${arrowX}px)rotate(${param.direction === 'l' ? 0 : 180}deg)` }}\n            />\n            <PlatformNum num={param.platform_num} transform={`translate(${platformNumX},0)`} />\n            <g\n                ref={destNameEl}\n                textAnchor={param.direction === 'l' ? 'start' : 'end'}\n                transform={`translate(${destNameX},-25)`}\n            >\n                <text className=\"rmg-name__zh\" fontSize={90}>\n                    {(param.customiseMTRDest.isLegacy ? param.line_name[0] : '') + 'å¾€' + destNames[0]}\n                </text>\n                <text className=\"rmg-name__en\" fontSize={45} dy={80}>\n                    {(param.customiseMTRDest.isLegacy ? param.line_name[1] + ' ' : '') + 'to ' + destNames[1]}\n                </text>\n            </g>\n        </g>\n    );\n};\n\nconst PlatformNum = (props: { num: string } & React.SVGProps<SVGGElement>) => {\n    const { num, ...others } = props;\n\n    return (\n        <g id=\"platform\" {...others}>\n            {React.useMemo(\n                () => (\n                    <>\n                        <circle cx={0} cy={0} r={75} />\n                        <text className=\"rmg-name__zh\" dy={0}>\n                            {num}\n                        </text>\n                    </>\n                ),\n                [num]\n            )}\n        </g>\n    );\n};\n"],"sourceRoot":""}