(this["webpackJsonprail-map-generator"]=this["webpackJsonprail-map-generator"]||[]).push([[62],{259:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(26),l=n(133),i=n(103),c=n(232),s=n(135),o=n(231),u=n(132),d=n(261),h=n(134),m=n(54),p=n(23);t.default=function(e){var t=Object(a.c)().t;return r.createElement(l.a,null,r.createElement(i.a,null,r.createElement(c.a,null,r.createElement("h3",{style:{margin:0}},t("stations.edit.branch.left")))),r.createElement(f,{stnId:e.stnId,direction:"left"}),r.createElement(s.a,null),r.createElement(i.a,null,r.createElement(c.a,null,r.createElement("h3",{style:{margin:0}},t("stations.edit.branch.right")))),r.createElement(f,{stnId:e.stnId,direction:"right"}))};var f=function(e){var t=r.useContext(p.b).param.stn_list[e.stnId].branch[e.direction];return r.useMemo((function(){return r.createElement(r.Fragment,null,r.createElement(E,e),t[0]&&r.createElement(r.Fragment,null,r.createElement(g,e),"shmetro"!==window.urlParams.get("style")&&r.createElement(b,e)))}),[e.stnId,e.direction,t[0]])},E=function(e){var t=Object(a.c)().t,n=r.useContext(p.b),l=n.param,c=n.dispatch,s=l.stn_list[e.stnId].branch[e.direction],m=function(t){var n=t.target.value;"na"!==n&&n!==s[0]&&c({type:"UPDATE_STATION_BRANCH_TYPE",stnId:e.stnId,direction:e.direction,branchType:n})};return r.useMemo((function(){return r.createElement(i.a,null,r.createElement(o.a,null,r.createElement(u.a,null,"merge_type")),r.createElement(d.a,{select:!0,style:{width:"100%"},variant:"outlined",label:t("stations.edit.branch.type.title"),onChange:m,value:s[0]||"na"},r.createElement(h.a,{key:"na",value:"na",disabled:0!==s.length},t("stations.edit.branch.type.na")),r.createElement(h.a,{key:"through",value:"through",disabled:0===s.length},t("stations.edit.branch.type.through")),r.createElement(h.a,{key:"nonthrough",value:"nonthrough",disabled:0===s.length},t("stations.edit.branch.type.nonThrough"))))}),[e.stnId,s[0]])},g=function(e){var t=Object(a.c)().t,n=r.useContext(p.b),l=n.param,c=n.dispatch,s=l.stn_list[e.stnId],f=s.branch[e.direction],E="left"===e.direction?s.parents:s.children,g=function(t){var n=t.target.value;if(f[1]!==n){var r,a=n,i=l.stn_list;if("right"===e.direction){for(;1===i[a].parents.length;)a=i[a].children[0];r=i[a].parents[E.indexOf(n)]}else{for(;1===i[a].children.length;)a=i[a].parents[0];r=i[a].children[E.indexOf(n)]}c({type:"UPDATE_STATION_BRANCH_FIRST",branches:[{stnId:e.stnId,direction:e.direction,first:n},{stnId:a,direction:"left"===e.direction?"right":"left",first:r}]})}};return r.useMemo((function(){return r.createElement(i.a,null,r.createElement(o.a,null,r.createElement(u.a,{style:{transform:"left"===e.direction?"scale(-1)":"scale(1)"}},"share")),r.createElement(d.a,{select:!0,style:{width:"100%"},variant:"outlined",label:t("stations.edit.branch.first"),onChange:g,value:f[1]||E[0]},E.map((function(e){return r.createElement(h.a,{key:e,value:e},Object(m.a)(l.stn_list[e]))}))))}),[e.stnId,f[1],E.toString()])},b=function(e){var t=Object(a.c)().t,n=r.useContext(p.b),l=n.param,c=n.dispatch,s=l.stn_list[e.stnId],m=s.branch[e.direction],f="left"===e.direction?s.parents:s.children,E=function(t){var n="lower"===t.target.value?1:0;if(f.indexOf(m[1])!==n){var r=m[1],a=l.stn_list;if("right"===e.direction){for(;1===a[r].parents.length;)r=a[r].children[0];c({type:"UPDATE_STATION_BRANCH_POS",right:e.stnId,left:r})}else{for(;1===a[r].children.length;)r=a[r].parents[0];c({type:"UPDATE_STATION_BRANCH_POS",left:e.stnId,right:r})}}};return r.useMemo((function(){return r.createElement(i.a,null,r.createElement(o.a,null,r.createElement(u.a,null,"swap_vert")),r.createElement(d.a,{select:!0,style:{width:"100%"},variant:"outlined",label:t("stations.edit.branch.pos.title"),onChange:E,value:1===f.indexOf(m[1])?"lower":"upper"},r.createElement(h.a,{key:"upper",value:"upper"},t("stations.edit.branch.pos.upper")),r.createElement(h.a,{key:"lower",value:"lower"},t("stations.edit.branch.pos.lower"))))}),[e.stnId,m[1],f.toString()])}}}]);
//# sourceMappingURL=panelStationsBranch.cb34f803.chunk.js.map