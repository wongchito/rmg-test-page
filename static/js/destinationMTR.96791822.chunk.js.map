{"version":3,"sources":["svgs/destination/destination-mtr.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","svgs/strip/strip-mtr.tsx"],"names":["React","memo","DefsMTR","stripPc","InfoMTR","id","d","fill","useContext","ParamContext","param","routes","destNames","customiseMTRDest","terminal","validDests","Array","from","Set","filter","route","includes","current_stn_idx","map","res","stnId","direction","reverse","stn_list","name","join","replace","destNameEl","useRef","useState","width","bBox","setBBox","useEffect","current","getBBox","toString","isLegacy","flagLength","arrowX","svgWidth","destination","platformNumX","destNameX","xlinkHref","style","transform","PlatformNum","num","platform_num","ref","textAnchor","className","fontSize","line_name","dy","props","others","useMemo","cx","cy","r","_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","height"],"mappings":"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","file":"static/js/destinationMTR.96791822.chunk.js","sourcesContent":["import React from 'react';\n\nimport { ParamContext } from '../../context';\nimport StripMTR from '../strip/strip-mtr';\n\nexport default React.memo(function DestinationMTR() {\n    return (\n        <>\n            <DefsMTR />\n            <StripMTR stripPc={90} />\n            <InfoMTR />\n        </>\n    );\n});\n\nconst DefsMTR = React.memo(() => (\n    <defs>\n        <path\n            id=\"arrow\"\n            d=\"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z\"\n            fill=\"var(--rmg-black,#000)\"\n        />\n    </defs>\n));\n\nconst InfoMTR = () => {\n    const { param, routes } = React.useContext(ParamContext);\n\n    let destNames = ['', ''];\n    if (param.customiseMTRDest.terminal !== false) {\n        destNames = param.customiseMTRDest.terminal;\n    } else {\n        const validDests = Array.from(\n            new Set(\n                routes\n                    .filter(route => route.includes(param.current_stn_idx))\n                    .map(route => {\n                        let res = route.filter(stnId => !['linestart', 'lineend'].includes(stnId));\n                        return param.direction === 'l' ? res[0] : res.reverse()[0];\n                    })\n            )\n        );\n        destNames = [\n            validDests.map(stnId => param.stn_list[stnId].name[0]).join('/'),\n            validDests\n                .map(stnId => param.stn_list[stnId].name[1])\n                .join('/')\n                .replace('\\\\', ' '),\n        ];\n    }\n\n    const destNameEl = React.useRef<SVGGElement | null>(null);\n    const [bBox, setBBox] = React.useState({ width: 0 } as DOMRect);\n    React.useEffect(\n        () => setBBox(destNameEl.current!.getBBox()),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [destNames.toString(), param.customiseMTRDest.isLegacy]\n    );\n\n    const flagLength = 160 + 150 + bBox.width + 45 + 50;\n    const arrowX = (param.svgWidth.destination - (param.direction === 'l' ? 1 : -1) * flagLength) / 2;\n    const platformNumX = arrowX + (param.direction === 'l' ? 1 : -1) * (160 + 50 + 75);\n    const destNameX = platformNumX + (param.direction === 'l' ? 1 : -1) * (75 + 45);\n\n    return (\n        <g id=\"dest_name\">\n            <use\n                xlinkHref=\"#arrow\"\n                style={{ transform: `translateX(${arrowX}px)rotate(${param.direction === 'l' ? 0 : 180}deg)` }}\n            />\n            <PlatformNum num={param.platform_num} transform={`translate(${platformNumX},0)`} />\n            <g\n                ref={destNameEl}\n                textAnchor={param.direction === 'l' ? 'start' : 'end'}\n                transform={`translate(${destNameX},-25)`}\n            >\n                <text className=\"rmg-name__zh\" fontSize={90}>\n                    {(param.customiseMTRDest.isLegacy ? param.line_name[0] : '') + 'å¾€' + destNames[0]}\n                </text>\n                <text className=\"rmg-name__en\" fontSize={45} dy={80}>\n                    {(param.customiseMTRDest.isLegacy ? param.line_name[1] + ' ' : '') + 'to ' + destNames[1]}\n                </text>\n            </g>\n        </g>\n    );\n};\n\nconst PlatformNum = (props: { num: string } & React.SVGProps<SVGGElement>) => {\n    const { num, ...others } = props;\n\n    return (\n        <g id=\"platform\" {...others}>\n            {React.useMemo(\n                () => (\n                    <>\n                        <circle cx={0} cy={0} r={75} />\n                        <text className=\"rmg-name__zh\" dy={0}>\n                            {num}\n                        </text>\n                    </>\n                ),\n                [num]\n            )}\n        </g>\n    );\n};\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React, { memo } from 'react';\n\nexport default memo(function StripMTR(props: { stripPc: number }) {\n    return (\n        <rect\n            fill=\"var(--rmg-theme-colour)\"\n            height={20}\n            style={{\n                width: 'var(--rmg-svg-width)',\n                ['--strip-percentage' as any]: props.stripPc,\n                transform: `translateY(calc(var(--strip-percentage, 95) * var(--rmg-svg-height) / 100 - 10px))`,\n            }}\n        />\n    );\n});\n"],"sourceRoot":""}