{"version":3,"sources":["panels/stations/edit-diag/more-tab.tsx"],"names":["allFacilities","airport","hsr","disney","allServices","local","express","FacilityDialog","props","t","useTranslation","open","onClose","dividers","name","value","facility","onChange","e","target","Object","keys","map","f","key","control","label","onClick","color","autoFocus","MoreTab","React","ParamContext","dispatch","param","facilityDialogOpen","setFacilityDialogOpen","window","urlParams","get","button","primary","secondary","row","s","checked","services","has","service","event","type","stnId","serviceId","isChecked","disabled","secondaryTypographyProps","action"],"mappings":"yTAwBMA,EAAgB,CAClB,GAAI,OACJC,QAAS,UACTC,IAAK,kBACLC,OAAQ,qBAGNC,EAAc,CAChBC,MAAO,WACPC,QAAS,WAkGb,SAASC,EAAeC,GAA6B,IACzCC,EAAMC,cAAND,EACR,OACI,gBAAC,IAAD,CAAQE,KAAMH,EAAMG,KAAMC,QAAS,kBAAMJ,EAAMI,QAAQ,WACnD,gBAAC,IAAD,KAAcH,EAAE,sCAChB,gBAAC,IAAD,CAAeI,UAAQ,GACnB,gBAAC,IAAD,CAAYC,KAAK,WAAWC,MAAOP,EAAMQ,SAAUC,SAAU,SAAAC,GAAC,OAAIV,EAAMI,QAAQM,EAAEC,OAAOJ,SACpFK,OAAOC,KAAKrB,GAAesB,KAAI,SAAAC,GAAC,OAC7B,gBAAC,IAAD,CACIR,MAAOQ,EACPC,IAAKD,EACLE,QAAS,gBAAC,IAAD,MACTC,MAAOjB,EAAE,gCAAwC,KAANc,EAAW,OAASA,WAK/E,gBAAC,IAAD,KACI,gBAAC,IAAD,CAAQI,QAAS,kBAAMnB,EAAMI,QAAQ,UAAUgB,MAAM,UAAUC,WAAS,GACnEpB,EAAE,kBA3BRqB,UAhFC,SAACtB,GAAoC,IACzCC,EAAMC,cAAND,EADwC,EAGpBsB,aAAiBC,KAA9BC,GAHiC,EAGxCC,MAHwC,EAGjCD,UAHiC,EAKIF,YAAe,GALnB,mBAKzCI,EALyC,KAKrBC,EALqB,KA0BhD,OACI,2BACI,gBAAC,IAAD,KACuC,QAAlCC,OAAOC,UAAUC,IAAI,UAClB,gBAAC,IAAD,CAAUC,QAAM,EAACb,QAAS,kBAAMS,GAAsB,KAClD,gBAAC,IAAD,KACI,gBAAC,IAAD,eAEJ,gBAAC,IAAD,CACIK,QAAShC,EAAE,sCACXiC,UAAWjC,EACP,gCAAqD,KAAnBD,EAAMQ,SAAkB,OAASR,EAAMQ,cAKtD,UAAlCqB,OAAOC,UAAUC,IAAI,UAClB,gBAAC,IAAD,KACI,gBAAC,IAAD,KACI,gBAAC,IAAD,eAEJ,gBAAC,IAAD,CACIE,QAAShC,EAAE,sCACXiC,UACI,gBAAC,IAAD,CAAWC,KAAG,GACTvB,OAAOC,KAAKjB,GAAakB,KAAI,SAACsB,GAAD,OAC1B,gBAAC,IAAD,CACInB,QACI,gBAAC,IAAD,CACIoB,QAASrC,EAAMsC,SAASC,IAAIH,GAC5B7B,MAAO6B,EACP3B,UA1CxB+B,EA0CiDJ,EA1ChB,SAACK,GACtC,UAAZD,GAEJf,EAAS,CACLiB,KAAM,0BACNC,MAAO3C,EAAM2C,MACbC,UAAWJ,EACXK,UAAWJ,EAAM9B,OAAO0B,YAoCgBS,SAAgB,UAANV,IAGlBlB,MAAOjB,EAAE,+BAAiCmC,GAC1CpB,IAAKoB,IA/CtB,IAACI,MAoDAO,yBAAwB,eAAK,YAAqB,WAM/B,QAAlClB,OAAOC,UAAUC,IAAI,UAClB,gBAAChC,EAAD,CAAgBI,KAAMwB,EAAoBvB,QAnE1B,SAAC4C,GACV,UAAXA,GAEAvB,EAAS,CAAEiB,KAAM,0BAA2BC,MAAO3C,EAAM2C,MAAOnC,SAAUwC,IAE9EpB,GAAsB,IA8D0DpB,SAAUR,EAAMQ","file":"static/js/panelStationsMore.d4186f78.chunk.js","sourcesContent":["import * as React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n    List,\n    ListItem,\n    ListItemIcon,\n    ListItemText,\n    Icon,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    RadioGroup,\n    FormControlLabel,\n    Radio,\n    DialogActions,\n    Button,\n    FormGroup,\n    Checkbox,\n    ExpansionPanelSummary,\n    Typography,\n    ExpansionPanelDetails,\n} from '@material-ui/core';\nimport { ParamContext } from '../../../context';\n\nconst allFacilities = {\n    '': 'None',\n    airport: 'Airport',\n    hsr: 'High Speed Rail',\n    disney: 'Disneyland Resort',\n};\n\nconst allServices = {\n    local: 'Stopping',\n    express: 'Express',\n};\n\ninterface StationEditMoreTabProps {\n    onUpdate: (value: any, field: string) => void;\n    facility: keyof typeof allFacilities;\n    services: Set<keyof typeof allServices>;\n    stnId: string;\n}\n\nconst MoreTab = (props: StationEditMoreTabProps) => {\n    const { t } = useTranslation();\n\n    const { param, dispatch } = React.useContext(ParamContext);\n\n    const [facilityDialogOpen, setFacilityDialogOpen] = React.useState(false);\n\n    const facilityDialogClose = (action: 'close' | '' | 'airport' | 'hsr' | 'disney') => {\n        if (action !== 'close') {\n            // props.onUpdate(action, 'facility');\n            dispatch({ type: 'UPDATE_STATION_FACILITY', stnId: props.stnId, facility: action });\n        }\n        setFacilityDialogOpen(false);\n    };\n\n    const servicesChange = (service: 'local' | 'express') => (event: React.ChangeEvent<HTMLInputElement>) => {\n        if (service === 'local') return;\n        // props.onUpdate({ chipId: service, selected: event.target.checked }, 'services');\n        dispatch({\n            type: 'UPDATE_STATION_SERVICES',\n            stnId: props.stnId,\n            serviceId: service,\n            isChecked: event.target.checked,\n        });\n    };\n\n    return (\n        <div>\n            <List>\n                {window.urlParams.get('style') === 'mtr' && (\n                    <ListItem button onClick={() => setFacilityDialogOpen(true)}>\n                        <ListItemIcon>\n                            <Icon>place</Icon>\n                        </ListItemIcon>\n                        <ListItemText\n                            primary={t('stations.edit.more.facility.button')}\n                            secondary={t(\n                                'stations.edit.more.facility.' + (props.facility === '' ? 'none' : props.facility)\n                            )}\n                        />\n                    </ListItem>\n                )}\n                {window.urlParams.get('style') === 'gzmtr' && (\n                    <ListItem>\n                        <ListItemIcon>\n                            <Icon>train</Icon>\n                        </ListItemIcon>\n                        <ListItemText\n                            primary={t('stations.edit.more.services.button')}\n                            secondary={\n                                <FormGroup row>\n                                    {Object.keys(allServices).map((s: 'local' | 'express') => (\n                                        <FormControlLabel\n                                            control={\n                                                <Checkbox\n                                                    checked={props.services.has(s)}\n                                                    value={s}\n                                                    onChange={servicesChange(s)}\n                                                    disabled={s === 'local'}\n                                                />\n                                            }\n                                            label={t('stations.edit.more.services.' + s)}\n                                            key={s}\n                                        />\n                                    ))}\n                                </FormGroup>\n                            }\n                            secondaryTypographyProps={{ ['component' as any]: 'div' }}\n                        />\n                    </ListItem>\n                )}\n            </List>\n\n            {window.urlParams.get('style') === 'mtr' && (\n                <FacilityDialog open={facilityDialogOpen} onClose={facilityDialogClose} facility={props.facility} />\n            )}\n        </div>\n    );\n};\n\nexport default MoreTab;\n\ninterface FacilityDialogProps {\n    open: boolean;\n    onClose: (action: string) => void;\n    facility: keyof typeof allFacilities;\n}\n\nfunction FacilityDialog(props: FacilityDialogProps) {\n    const { t } = useTranslation();\n    return (\n        <Dialog open={props.open} onClose={() => props.onClose('close')}>\n            <DialogTitle>{t('stations.edit.more.facility.title')}</DialogTitle>\n            <DialogContent dividers>\n                <RadioGroup name=\"facility\" value={props.facility} onChange={e => props.onClose(e.target.value)}>\n                    {Object.keys(allFacilities).map(f => (\n                        <FormControlLabel\n                            value={f}\n                            key={f}\n                            control={<Radio />}\n                            label={t('stations.edit.more.facility.' + (f === '' ? 'none' : f))}\n                        />\n                    ))}\n                </RadioGroup>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={() => props.onClose('close')} color=\"primary\" autoFocus>\n                    {t('dialog.done')}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n"],"sourceRoot":""}