(this["webpackJsonprail-map-generator"]=this["webpackJsonprail-map-generator"]||[]).push([[67],{147:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},149:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return a}))},153:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return l})),n.d(e,"f",(function(){return u})),n.d(e,"e",(function(){return m})),n.d(e,"a",(function(){return f})),n.d(e,"d",(function(){return h}));var r=n(147),a=n(149),s=n(53),i=n(9),c=n(3),o=(n(43),function(t,e,n){return Object.keys(t).reduce((function(r,a){return Object(c.a)({},r,Object(i.a)({},a,t[a].children.reduce((function(r,s){return Object(c.a)({},r,Object(i.a)({},s,1+e(t,s)+n(t,a)))}),{})))}),{})}),l=function t(e,n,r){if(e==n)return{len:0,nodes:[e]};var a=[],s=[];Object.keys(r[e]).forEach((function(i){var c=t(i,n,r);c.len<0||(a.push(r[e][i]+c.len),c.nodes.unshift(e),s.push(c.nodes))}));var i=Math.max.apply(Math,a);return{len:i,nodes:s[a.indexOf(i)]}},u=function(t,e,n){var r=l("linestart","lineend",e);if(r.nodes.includes(t))return l(r.nodes[1],t,e).len;for(var a=n.filter((function(e){return e.includes(t)}))[0],s=t;!r.nodes.includes(s);)s=a[a.indexOf(s)-1];for(var i=t;!r.nodes.includes(i);)i=a[a.indexOf(i)+1];var c="linestart"===s,o=[];return c||"lineend"===i?c?(o[0]=0,o[1]=l(r.nodes[1],i,e).len,o[2]=l(a[1],t,e).len,o[3]=l(t,i,e).len):(o[0]=l(r.nodes[1],s,e).len,o[1]=l(s,r.nodes.slice(-2)[0],e).len,o[2]=l(s,t,e).len,o[3]=l(t,a.slice(-2)[0],e).len):(o[0]=l(r.nodes[1],s,e).len,o[1]=l(s,i,e).len,o[2]=l(s,t,e).len,o[3]=l(t,i,e).len),o[0]+o[2]*o[1]/(o[2]+o[3])},m=function(t,e,n){var r;return console.log("computing stations' states"),Object(s.a)(new Set((r=[]).concat.apply(r,Object(s.a)(e)))).reduce((function(r,a){return Object(c.a)({},r,Object(i.a)({},a,a===t?0:("r"===n?function(t,e,n){var r=!0,a=!1,s=void 0;try{for(var i,c=n[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var o=i.value,l=o.indexOf(t),u=o.indexOf(e);if(-1!==l&&l<u)return!0}}catch(m){a=!0,s=m}finally{try{r||null==c.return||c.return()}finally{if(a)throw s}}return!1}(t,a,e):function(t,e,n){var r=!0,a=!1,s=void 0;try{for(var i,c=n[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var o=i.value,l=o.indexOf(t),u=o.indexOf(e);if(-1!==u&&u<l)return!0}}catch(m){a=!0,s=m}finally{try{r||null==c.return||c.return()}finally{if(a)throw s}}return!1}(t,a,e))?1:-1))}),{})},f=function(){function t(e){var n=this;Object(r.a)(this,t),this.yShares={},this.xShares={},this.namePoss={},this.stnList={},this.criticalPath={},this.leftWideFactor=function(t){return 0},this.rightWideFactor=function(t){return 0},this.pathWeight=function(t,e){return n.stnList[t].children.includes(e)?1+n.rightWideFactor(t)+n.leftWideFactor(e):-1/0},this.pathTurnParams=function(t){var e=35-17.5*Math.sqrt(3),n=t-2*e;return{tr:35,dx_a:17.5,dy_a:e,dx_l:n*Math.sqrt(3),dy_l:n}},this.pathTurnSE=function(t){var e=n.pathTurnParams(t),r=e.tr,a=e.dx_a,s=e.dy_a,i=e.dx_l,c=e.dy_l;return"a ".concat(r,",").concat(r," 0 0,1 ").concat(a,",").concat(s," l ").concat(i,",").concat(c," a ").concat(r,",").concat(r," 0 0,0 ").concat(a,",").concat(s)},this.pathTurnNE=function(t){var e=n.pathTurnParams(t),r=e.tr,a=e.dx_a,s=e.dy_a,i=e.dx_l,c=e.dy_l;return"a ".concat(r,",").concat(r," 0 0,0 ").concat(a,",").concat(-s," l ").concat(i,",").concat(-c," a ").concat(r,",").concat(r," 0 0,1 ").concat(a,",").concat(-s)},this.stnList=e.stnList,this.criticalPath=e.criticalPath}return Object(a.a)(t,[{key:"getYShare",value:function(t,e){if(t in this.yShares)return this.yShares[t];if(["linestart","lineend"].includes(t)||this.stnList[t].parents.length>1||this.stnList[t].children.length>1)return this.yShares[t]=0,0;var n=this.stnList[t].parents[0];if(n){if(1==this.stnList[n].children.length){var r=this.getYShare(n);return this.yShares[t]=r,r}var a=0==this.stnList[n].children.indexOf(t)?1:-1;return this.yShares[t]=a,a}return this.yShares[t]=0,0}},{key:"getNamePos",value:function(t){if("linestart"===t)return this.namePoss.linestart=!0,!0;var e=this.criticalPath.nodes.indexOf(t)%2;if(-1===e){var n=this.stnList[t].parents[0];if(2===this.stnList[n].children.length){var r=this.getNamePos(n);return this.namePoss[t]=r,r}var a=!this.getNamePos(n);return this.namePoss[t]=a,a}return this.namePoss[t]=1===e,1===e}},{key:"_linePath",value:function(t,e,n,r,a,s,i){var c=this,o=[],l=o[0],u=o[1],m=o[2],f=[],h=this.pathTurnParams(s),d=h.dx_a+h.dx_l/2,p=(e[1]-e[0])/i.len*.8,g=((e[1]-e[0])/i.len-2*d)/2;return g+p<0&&console.warn("SVG width too small! ".concat(g+p)),t.forEach((function(e){var i=r[e],o=a[e];if(!u&&0!==u)return l=e,m=i,u=o,void(1===t.length?f.push("M ".concat(i,",").concat(o)):n[0].includes(e)?n[0].includes(t[1])?f.push("M ".concat(i,",").concat(o)):(r[t[1]]>0&&f.push("M ".concat(i,",").concat(o+9.68)),a[t[1]]<0&&f.push("M ".concat(i,",").concat(o-9.68))):f.push("M ".concat(i,",").concat(o)));o>u?(f.push("h ".concat(0===o?i-m-p*c.leftWideFactor(e)-g-2*d:p*c.rightWideFactor(l)+g)),f.push(c.pathTurnSE(s))):o<u&&(f.push("h ".concat(0===o?i-m-p*c.leftWideFactor(e)-g-2*d:p*c.rightWideFactor(l)+g)),f.push(c.pathTurnNE(s))),f.push("H ".concat(i)),l=e,m=i,u=o})),f.join(" ").replace(/( H ([\d.]+))+/g," H $2")}}],[{key:"getYShares",value:function(t,e){console.log("computing y shares");var n=new this({stnList:t});return Object.keys(t).forEach((function(t){["linestart","lineend"].includes(t)||t in n.yShares||n.getYShare(t,e)})),n.yShares}},{key:"getNamePos",value:function(t,e){console.log("computing name position");var n=new this({stnList:t,criticalPath:e});return Object.keys(t).forEach((function(t){["linestart","lineend"].includes(t)||t in n.namePoss||n.getNamePos(t)})),n.namePoss}},{key:"drawLine",value:function(t,e,n,r,a,s,i,c){var o=this,l={main:[],pass:[]};return t.map((function(u,m){var f=(u=u.filter((function(t){return!["linestart","lineend"].includes(t)}))).filter((function(t){return e[t]>=0})),h=u.filter((function(t){return e[t]<=0}));1===f.length&&(h=u),0==f.filter((function(t){return-1!==h.indexOf(t)})).length&&f.length&&(h[0]===u[0]?h.push(f[0]):f[0]===u[0]&&f[f.length-1]===u[u.length-1]&&h.length?(h=u,f=[]):h.unshift(f[f.length-1])),l.main.push(new o({stnList:n,criticalPath:c})._linePath(f,r,t,a,s,i,c)),l.pass.push(new o({stnList:n,criticalPath:c})._linePath(h,r,t,a,s,i,c))})),l}}]),t}(),h=function(t,e){var n={main:[],pass:[]};return t.map((function(t){var r=(t=t.filter((function(t){return!["linestart","lineend"].includes(t)}))).filter((function(t){return e[t]>=0})),a=t.filter((function(t){return e[t]<=0}));1===r.length&&(a=t),0==r.filter((function(t){return-1!==a.indexOf(t)})).length&&r.length&&(a[0]===t[0]?a.push(r[0]):r[0]===t[0]&&r[r.length-1]===t[t.length-1]&&a.length?(a=t,r=[]):a.unshift(r[r.length-1])),n.main.push(r),n.pass.push(a)})),n}},154:function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},156:function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return r}))},157:function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=n(154);function s(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?Object(a.a)(t):e}n.d(e,"a",(function(){return s}))},158:function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return a}))},184:function(t,e,n){"use strict";var r=n(9),a=n(0);e.a=a.memo((function(t){var e;return a.createElement("rect",{fill:"var(--rmg-theme-colour)",height:20,style:(e={width:"var(--rmg-svg-width)"},Object(r.a)(e,"--strip-percentage",t.stripPc),Object(r.a)(e,"transform","translateY(calc(var(--strip-percentage, 95) * var(--rmg-svg-height) / 100 - 10px))"),e)})}))},268:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(23),s=n(184),i=n(9),c=n(3),o=n(153),l=n(147),u=n(157),m=n(156),f=n(158),h=function(t){function e(){var t,n;Object(l.a)(this,e);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(u.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(a)))).leftWideFactor=function(t){var e=0,r=n.stnList[t].transfer,a=r.type;return"l"===r.tick_direc&&["int3","osi11","osi12","osi21","osi31"].includes(a)&&(e+=.8),"osi22"===a&&(e+=.8),2===n.stnList[t].parents.length&&(e+=.4),2===n.stnList[n.stnList[t].parents[0]].children.length&&(e+=.4),e},n.rightWideFactor=function(t){var e=0,r=n.stnList[t].transfer,a=r.type;return"r"===r.tick_direc&&["int3","osi11","osi12","osi21","osi31"].includes(a)&&(e+=.8),"osi22"===a&&(e+=.8),2===n.stnList[t].children.length&&(e+=.4),2===n.stnList[n.stnList[t].children[0]].parents.length&&(e+=.4),e},n}return Object(f.a)(e,t),e}(o.a),d=n(13),p=function(t){var e=r.useContext(a.b).param.stn_list[t.stnId],n=r.useMemo((function(){var t=[];return 2===e.children.length&&t.push(1===e.children.indexOf(e.branch.right[1])?"SE":"NE"),2===e.parents.length&&t.push(1===e.parents.indexOf(e.branch.left[1])?"SW":"NW"),t}),[e.parents.toString(),e.children.toString(),JSON.stringify(e.branch)]),s=r.useMemo((function(){var t=n;return 0===t.length?"":t.includes("NW")&&t.includes("SE")||t.includes("NE")&&t.includes("SW")?"_bb":"_b"}),[n.toString()]),i=r.useMemo((function(){if(""===s)return 0;if("_bb"===s)return t.namePos?9.68:-9.68;var e=n;return e.includes("SE")||e.includes("SW")?t.namePos?9.68:0:e.includes("NE")||e.includes("NW")?t.namePos?0:-9.68:void 0}),[n.toString(),s,t.namePos]),c=r.useMemo((function(){if(""===s)return 0;if("_bb"===s)return t.namePos?-9.68:9.68;var e=n;return e.includes("SE")||e.includes("SW")?t.namePos?0:9.68:e.includes("NE")||e.includes("NW")?t.namePos?-9.68:0:void 0}),[s,t.namePos,n]),o=function(t){var n=t.type,r=t.info;switch(n){case"int3":case"osi31":return r[0].length<11?"int".concat(r[0].length+1):"int12";case"osi11":case"osi21":return"osi11";case"osi12":case"osi13":return"osi12";case"osi22":return"linestart"===e.parents[0]||"lineend"===e.children[0]?"osi22end":"osi12";default:return"stn"}}(e.transfer);return r.createElement(r.Fragment,null,r.createElement("g",{style:{transform:"translateY(".concat(c,"px)")}},r.createElement(E,{variant:"osi22"!==e.transfer.type||"linestart"!==e.parents[0]&&"lineend"!==e.children[0]?e.transfer.type:"osi22end",stnTrans:e.transfer,stnState:t.stnState,namePos:t.namePos,end:"osi22end"===o?"linestart"===e.parents[0]?"left":"right":null}),o.includes("osi")&&r.createElement(v,{name:e.transfer.osi_names[0],stnState:t.stnState,variant:"osi22"!==e.transfer.type||"linestart"!==e.parents[0]&&"lineend"!==e.children[0]?e.transfer.type:"osi22end",tickDirec:e.transfer.tick_direc,namePos:t.namePos,end:"osi22end"===o?"linestart"===e.parents[0]?"left":"right":null})),r.createElement("use",{xlinkHref:"#"+o+s,className:(-1===t.stnState?"rmg-stn__mtr--pass":"rmg-stn__mtr--future")+(e.transfer.paid_area?" rmg-stn__mtr--paid-osi":" rmg-stn__mtr--unpaid-osi"),style:{transform:"translateY(".concat(i,"px)")+"scale(".concat("lineend"===e.children[0]?1:-1,",").concat(t.namePos?-1:1,")")}}),r.createElement("g",{style:{transform:"translateY(".concat(i,"px)")}},r.createElement(g,{name:e.name,namePos:t.namePos,stnState:t.stnState,facility:e.facility,nameDX:"osi22"===e.transfer.type&&"osi12"===o?"l"===e.transfer.tick_direc?3:-3:null})))},g=function(t){var e=r.createRef(),n=r.useState({width:0,x:0}),a=Object(d.a)(n,2),s=a[0],i=a[1];r.useEffect((function(){i(e.current.getBBox())}),[t.stnState,t.name.toString()]);var c=t.namePos?24.8125:-36.21875-11*(t.name[1].split("\\").length-1),o=t.nameDX?t.nameDX>0?"start":"end":"middle",l=t.nameDX?t.namePos?11.515625:-11.515625:0,u=t.nameDX?t.nameDX>0?t.nameDX+17.515625:-17.515625-s.width+t.nameDX:-(s.width+3)/2,m=""===t.facility?0:t.nameDX?t.nameDX<0?0:38.03125+t.nameDX:19.015625;return r.createElement("g",{textAnchor:o,style:{transform:"translateY(".concat(c+l,"px)")},className:"Name ".concat(-1===t.stnState?"Pass":0===t.stnState?"Current":"Future")},0===t.stnState&&r.createElement("rect",{id:"current_bg",x:s.x-3+(0===m?0:m-1),y:-11.8125,width:s.width+6+(0===m?0:1),height:33.03125+11*(t.name[1].split("\\").length-1)+2}),""!==t.facility&&r.createElement("use",{xlinkHref:"#"+t.facility,fill:-1===t.stnState?"var(--rmg-grey)":"var(--rmg-black)",x:u,y:5.5*(t.name[1].split("\\").length-1)-11.8125}),r.createElement("g",{ref:e,style:{transform:"translateX(".concat(m,"px)")}},r.createElement(y,{name:t.name,nameGap:17})))},y=r.memo((function(t){return r.createElement(r.Fragment,null,r.createElement("text",{className:"rmg-name__zh rmg-name__mtr--station"},t.name[0]),t.name[1].split("\\").map((function(e,n){return r.createElement("text",{key:n,className:"rmg-name__en rmg-name__mtr--station",dy:t.nameGap+11*n},e)})))}),(function(t,e){return t.name.toString()===e.name.toString()&&t.nameGap===e.nameGap})),E=function(t){switch(t.variant){case"int2":return r.createElement("g",null,r.createElement(_,{intInfo:t.stnTrans.info[0][0],stnState:t.stnState,rotation:t.namePos?180:0}));case"int3":case"osi31":return r.createElement(r.Fragment,null,t.stnTrans.info[0].map((function(e,n){return r.createElement("g",{key:n,style:{transform:"translateY(".concat(t.namePos?-18*(t.stnTrans.info[0].length-n):18*(n+1),"px)")}},r.createElement(_,{intInfo:e,stnState:t.stnState,rotation:"r"===t.stnTrans.tick_direc?-90:90}))})));case"osi11":case"osi21":return r.createElement("g",{style:{transform:"translateY(".concat(t.namePos?-26:26,"px)")}},r.createElement(_,{intInfo:t.stnTrans.info[1][0],stnState:t.stnState,rotation:t.namePos?180:0}));case"osi12":case"osi13":return r.createElement(r.Fragment,null,t.stnTrans.info[1].map((function(e,n){return r.createElement("g",{key:n,style:{transform:"translateY(".concat(t.namePos?-8-18*(t.stnTrans.info[1].length-n):8+18*(n+1),"px)")}},r.createElement(_,{intInfo:e,stnState:t.stnState,rotation:"r"===t.stnTrans.tick_direc?-90:90}))})));case"osi22":return r.createElement(r.Fragment,null,r.createElement("g",null,r.createElement(_,{intInfo:t.stnTrans.info[0][0],stnState:t.stnState,rotation:t.namePos?0:180,nameDX:"r"===t.stnTrans.tick_direc?3:-3})),t.stnTrans.info[1].map((function(e,n){return r.createElement("g",{key:n,style:{transform:"translateY(".concat(t.namePos?-8-18*(t.stnTrans.info[1].length-n):8+18*(n+1),"px)")}},r.createElement(_,{intInfo:e,stnState:t.stnState,rotation:"r"===t.stnTrans.tick_direc?-90:90}))})));case"osi22end":return r.createElement(r.Fragment,null,r.createElement("g",null,r.createElement(_,{intInfo:t.stnTrans.info[0][0],stnState:t.stnState,rotation:t.namePos?180:0})),t.stnTrans.info[1].map((function(e,n){return r.createElement("g",{key:n,style:{transform:"translate(".concat("left"===t.end?-41:41,"px,").concat(t.namePos?18*n:-18*(t.stnTrans.info[1].length-1-n),"px)")}},r.createElement(_,{intInfo:e,stnState:t.stnState,rotation:"left"===t.end?90:-90}))})));default:return r.createElement(r.Fragment,null)}},_=function(t){var e=t.intInfo[4].split("\\").length,n=t.intInfo[5].split("\\").length,a=function(t){switch(t){case 90:return-24;case-90:return 24;default:return 0}}(t.rotation),s=function(t){switch(t){case 0:return 30.953125;case 180:return-37.703125-10*(e-1)-7*(n-1);default:return 5.953125-(19.65625+10*(e-1)+7*(n-1)-1)/2}}(t.rotation),i=function(e){switch(e){case 90:return"end";case-90:return"start";default:return t.nameDX?t.nameDX>0?"start":"end":"middle"}}(t.rotation);return r.useMemo((function(){return r.createElement(r.Fragment,null,r.createElement("use",{xlinkHref:"#inttick",stroke:t.intInfo[2],style:{transform:"rotate(".concat(t.rotation,"deg)")},className:"rmg-line rmg-line__mtr rmg-line__change"+(-1===t.stnState?" rmg-line__pass":"")}),r.createElement("g",{textAnchor:i,style:{transform:"translate(".concat(a+(t.nameDX||0),"px,").concat(s,"px)")},className:"Name ".concat(-1===t.stnState?"Pass":"Future")},t.intInfo[4].split("\\").map((function(t,e){return r.createElement("text",{key:e,className:"rmg-name__zh IntName",dy:10*e},t)})),t.intInfo[5].split("\\").map((function(t,n){return r.createElement("text",{key:e+n,className:"rmg-name__en IntName",dy:10*e-1+7*n},t)}))))}),[t.intInfo.toString(),t.rotation,t.stnState])},v=function(t){var e=function(e){switch(e){case"osi11":case"osi21":return"l"===t.tickDirec?"end":"start";case"osi22":return"l"===t.tickDirec?"start":"end";default:return"middle"}}(t.variant),n=function(e){switch(e){case"osi11":case"osi21":return"l"===t.tickDirec?-13:13;case"osi22":return"l"===t.tickDirec?13:-13;case"osi22end":return"left"===t.end?-41:41;default:return 0}}(t.variant),a=function(e){switch(e){case"osi11":case"osi21":return 8.34375+(t.namePos?-26:26)-12.515625-(t.namePos?10*(t.name[1].split("\\").length-1):0);case"osi12":return t.namePos?-70.6875-10*(t.name[1].split("\\").length-1):62.34375;case"osi22":return(t.namePos?-8:8)-(t.namePos?27:-27)+8.34375-12.515625-5*(t.name[1].split("\\").length-1);case"osi22end":return t.namePos?-26.6875-10*(t.name[1].split("\\").length-1):18.34375;default:return 0}}(t.variant);return r.createElement("g",{textAnchor:e,style:{transform:"translate(".concat(n,"px,").concat(a,"px)")},className:"Name ".concat(-1===t.stnState?"Pass":"Future")},r.createElement("text",{className:"rmg-name__zh rmg-name__mtr--osi"},t.name[0]),t.name[1].split("\\").map((function(t,e){return r.createElement("text",{key:e,className:"rmg-name__en rmg-name__mtr--osi",dy:12+10*e},t)})))},b=function(t,e){var n=0,r=t[e].transfer,a=r.type;return"l"===r.tick_direc&&["int3","osi11","osi12","osi21","osi31"].includes(a)&&(n+=.8),"osi22"===a&&(n+=.8),2===t[e].parents.length&&(n+=.4),2===t[t[e].parents[0]].children.length&&(n+=.4),n},x=function(t,e){var n=0,r=t[e].transfer,a=r.type;return"r"===r.tick_direc&&["int3","osi11","osi12","osi21","osi31"].includes(a)&&(n+=.8),"osi22"===a&&(n+=.8),2===t[e].children.length&&(n+=.4),2===t[t[e].children[0]].parents.length&&(n+=.4),n},S=function(){var t,e=r.useContext(a.b),n=e.param,s=e.branches,l=e.routes,u=e.deps,m=Object(o.b)(n.stn_list,b,x),f=r.useMemo((function(){return Object(o.c)("linestart","lineend",m)}),[JSON.stringify(m)]),d=r.useMemo((function(){return Object(o.c)(f.nodes[1],f.nodes.slice(-2)[0],m)}),[JSON.stringify(m)]),p=r.useMemo((function(){return console.log("computing x shares"),Object.keys(n.stn_list).reduce((function(t,e){return Object(c.a)({},t,Object(i.a)({},e,Object(o.f)(e,m,s)))}),{})}),[s.toString(),JSON.stringify(m)]),g=[n.svgWidth.railmap*n.padding/100,n.svgWidth.railmap*(1-n.padding/100)],y=Object.keys(p).reduce((function(t,e){return Object(c.a)({},t,Object(i.a)({},e,g[0]+p[e]/d.len*(g[1]-g[0])))}),{}),E=r.useMemo((function(){return h.getYShares(n.stn_list,s)}),[u]),_=Object.keys(E).reduce((function(t,e){return Object(c.a)({},t,Object(i.a)({},e,-E[e]*n.branch_spacing+(s[0].includes(e)?0:E[e]>0?-9.68:9.68)))}),{}),v=r.useMemo((function(){return Object(o.e)(n.current_stn_idx,l,n.direction)}),[n.current_stn_idx,n.direction,l.toString()]),S=r.useMemo((function(){return h.getNamePos(n.stn_list,f)}),[u,JSON.stringify(f)]),O=h.drawLine(s,v,n.stn_list,g,y,_,n.branch_spacing,f);return r.createElement("g",{id:"main",style:(t={},Object(i.a)(t,"--y-percentage",n.y_pc),Object(i.a)(t,"transform","translateY(calc(var(--y-percentage) * var(--rmg-svg-height) / 100))"),t)},r.createElement(P,{paths:O}),r.createElement(k,{xs:y,ys:_,stnStates:v,namePoss:S}))},P=r.memo((function(t){return r.createElement("g",{style:{fill:"none",strokeWidth:9.68}},r.createElement("g",{style:{stroke:"var(--rmg-grey)"}},t.paths.pass.map((function(t,e){return r.createElement("path",{key:e,d:t})}))),r.createElement("g",{style:{stroke:"var(--rmg-theme-colour)"}},t.paths.main.map((function(t,e){return r.createElement("path",{key:e,d:t})}))))}),(function(t,e){return JSON.stringify(t.paths)===JSON.stringify(e.paths)})),k=function(t){var e=r.useContext(a.b).param,n={};return Object.keys(t.namePoss).forEach((function(r){return n[r]=e.txt_flip?!t.namePoss[r]:t.namePoss[r]})),r.createElement("g",{id:"stn_icons"},Object.keys(e.stn_list).map((function(e){if(!["linestart","lineend"].includes(e))return r.createElement("g",{key:e,style:{transform:"translate(".concat(t.xs[e],"px,").concat(t.ys[e],"px)")}},r.createElement(p,{stnId:e,stnState:t.stnStates[e],namePos:n[e]}))})))},O=(e.default=function(){var t=r.useContext(a.b).param;return r.createElement(r.Fragment,null,r.createElement(O,null),r.createElement(s.a,{stripPc:t.strip_pc}),r.createElement(S,null))},r.memo((function(){return r.createElement("defs",null,r.createElement("g",{id:"airport",transform:"scale(0.5970084519)"},r.createElement("rect",{x:-29.33899,height:58.67798,width:58.67798}),r.createElement("path",{id:"airport",d:"M28.9769,6.60134c1.711.013,3.111,2.53205,3.111,4.241v10.337s17.106,15.435,17.358,15.666a1.145,1.145,0,0,1,.488,1.152v2.833c0,.651-.451.61-.695.467-.334-.119-17.151-8.863-17.151-8.863-.004,1.458-.797,9.006-1.326,13.304,0,0,4.61,2.457,4.699,2.521.334.268.352.359.352.852v2.001c0,.477-.352.428-.51.324-.183-.062-5.693-1.921-5.693-1.921a2.56018,2.56018,0,0,0-.633-.127,2.31654,2.31654,0,0,0-.666.127s-5.477,1.859-5.672,1.921c-.185.104-.523.153-.523-.324v-2.001c0-.493.029-.584.367-.852.086-.064,4.678-2.521,4.678-2.521-.524-4.298-1.307-11.846-1.325-13.304,0,0-16.822,8.744-17.148,8.863-.217.143-.69.184-.69-.467v-2.833a1.16206,1.16206,0,0,1,.473-1.152c.276-.231,17.365-15.666,17.365-15.666v-10.337c0-1.709,1.403-4.228,3.14105-4.241",transform:"translate(-28.9697,0.14347)",fill:"white"})),r.createElement("g",{id:"disney",transform:"scale(0.5970084519)"},r.createElement("rect",{x:-29.33899,width:58.67798,height:58.67798}),r.createElement("path",{fill:"white",d:"M45.6152,7.85015a9.80248,9.80248,0,0,0-9.79907,9.801,9.70059,9.70059,0,0,0,.342,2.582c.002.026.002.055.002.093a.31815.31815,0,0,1-.31494.318.67741.67741,0,0,1-.12806-.02,15.71521,15.71521,0,0,0-13.498,0,.61.61,0,0,1-.122.02.31841.31841,0,0,1-.322-.318v-.067a9.62553,9.62553,0,0,0,.35608-2.608,9.803,9.803,0,1,0-9.797,9.8,10.10364,10.10364,0,0,0,2.308-.271h.05493a.31113.31113,0,0,1,.31409.318.32433.32433,0,0,1-.019.12,15.72588,15.72588,0,1,0,29.703,7.216,15.83676,15.83676,0,0,0-1.746-7.23.18417.18417,0,0,1-.0271-.106.31612.31612,0,0,1,.32007-.318h.057a10.15953,10.15953,0,0,0,2.316.271,9.80051,9.80051,0,0,0,0-19.601",transform:"translate(-28.9697 0.13398)"})),r.createElement("clipPath",{id:"hsr-clip-path",transform:"translate(-0.00057 0.01643)"},r.createElement("path",{fill:"none",d:"M5.1606.89861a3.67176,3.67176,0,0,0-3.676,3.667v48.966a3.67842,3.67842,0,0,0,3.676,3.692h48.443a3.67892,3.67892,0,0,0,3.678-3.692V4.5656a3.67227,3.67227,0,0,0-3.678-3.667Z"})),r.createElement("g",{id:"hsr",transform:"scale(0.5970084519)"},r.createElement("rect",{x:-29.33899,width:58.67798,height:58.67798}),r.createElement("g",{clipPath:"url(#hsr-clip-path)",transform:"translate(-29.33899,0)"},r.createElement("rect",{x:-3.25242,y:24.74141,width:61.75879,height:.98008,transform:"translate(-8.93747 17.31321) rotate(-30.16134)",fill:"white"}),r.createElement("path",{d:"M5.77169,48.97289c-2.17407-3.89294,2.56994-10.525,4.85-13.724l.173-.248a83.00826,83.00826,0,0,1,7.39294-9.285,97.384,97.384,0,0,1,11.082-9.958c7.051-6.045,15.832-5.876,16.447-5.894l11.785-.957.276,17.42-11.5271,10.586c-.36.39405-5.553,5.863-18.10193,11.035-6.752,2.783-11.877,4.146-15.66,4.146-3.301,0-5.561-1.049-6.71692-3.121",transform:"translate(-0.00057 0.01643)",fill:"white"}),r.createElement("polygon",{points:"57.453 29.614 32.426 58.31 35.582 58.509 57.584 30.433 57.453 29.614",fill:"white"}),r.createElement("path",{d:"M49.04708,11.61364a.94277.94277,0,0,0-.17407-.227c-.752-.93695-2.988-1.259-5.933-.793a25.98382,25.98382,0,0,0-9.99695,3.032A98.52916,98.52916,0,0,0,20.723,23.69768c-3.1759,3.487-4.645,6.388-3.62292,7.584,1.84,2.166,13.7539.716,22.00793-6.066,9.035-7.42,10.718-11.577,9.93909-13.602",transform:"translate(-0.00057 0.01643)"}),r.createElement("path",{d:"M34.65255,13.81182c5.65991-2.842,11.28088-2.856,12.1499-1.213.88306,1.652-2.99792,5.303-8.656,8.128-5.648,2.837-10.9469,3.805-11.81994,2.15-.873-1.641,2.668-6.237,8.326-9.065",transform:"translate(-0.00057 0.01643)",fill:"white"}),r.createElement("path",{d:"M58.10958,25.03454c-16.832,20.708-40.7301,26.038-40.7301,26.038,11-6.73,12.769-8.111,18.968-18.01,8.364-13.351,21.77808-21.549,21.912-21.63,0,0-.068,13.5-.1499,13.602",transform:"translate(-0.00057 0.01643)"}),r.createElement("path",{d:"M27.1877,26.69561l9.705-2.814a6.22768,6.22768,0,0,1-1.994,2.759,25.57277,25.57277,0,0,1-6.697,3.405,11.78221,11.78221,0,0,1-5.5.783Z",transform:"translate(-0.00057 0.01643)",fill:"white"}),r.createElement("path",{d:"M19.59005,25.97692a18.37656,18.37656,0,0,1,3.891-3.976,6.66452,6.66452,0,0,0-.30908,2.213l-4.391,4.829a6.18212,6.18212,0,0,1,.80908-3.066",transform:"translate(-0.00057 0.01643)",fill:"white"}),r.createElement("polygon",{points:"23.156 58.311 57.463 26.746 57.396 25.857 21.582 58.607 23.156 58.311",fill:"white"}),r.createElement("path",{d:"M60.15645,12.35973a68.6782,68.6782,0,0,0-12.602,9.542c-8.15,7.745-12.109,15.259-9.855,16.091,2.24793.816,10.678-4.782,18.83594-12.543,1.828-1.74,3.48-3.424,4.926-5.024Z",transform:"translate(-0.00057 0.01643)",fill:"white"}),r.createElement("path",{d:"M63.07638,11.82653a40.86955,40.86955,0,0,0-10,7.096c-5.90406,5.437-9.48609,11.105-7.848,11.742,1.657.631,8.28894-3.955,14.188-9.401a61.76591,61.76591,0,0,0,4.61694-4.705Z",transform:"translate(-0.00057 0.01643)"}),r.createElement("path",{d:"M12.67989,42.93969a9.87,9.87,0,0,0-5.754-1.895c-.113.22-.223.439-.33008.662a9.45046,9.45046,0,0,1,5.69507,1.749,6.27885,6.27885,0,0,1,2.61,6.305,10.16524,10.16524,0,0,1-.598,2.228c.238-.023.481-.053.725-.087.78308-2.249,1.394-6.184-2.3479-8.962",transform:"translate(-0.00057 0.01643)"}))),r.createElement("circle",{id:"stn",r:8,className:"rmg-stn__mtr"}),r.createElement("path",{id:"stn_b",className:"rmg-stn__mtr",d:"M -6.369803765,4.84 a 8,8 0 1,1 12.73960753,0 a 8,8 0 1,1 -12.73960758,0 Z"}),r.createElement("path",{id:"stn_bb",d:"M -6.369803765,4.84 a 8,8 0 1,1 12.73960753,0 a 8,8 0 0,1 0,9.68 a 8,8 0 1,1 -12.73960753,0 a 8,8 0 0,1 0,-9.68 Z",className:"rmg-stn__mtr"}),r.createElement("path",{id:"int2",d:"M -8,0 v 18 a 8,8 0 0,0 16,0 v -18 a 8,8 0 0,0 -16,0 Z",className:"rmg-stn__mtr"}),[3,4,5,6,7,8,9,10,11,12].map((function(t){var e=18*(t-1);return r.createElement(r.Fragment,{key:t},r.createElement("path",{id:"int".concat(t),d:"M -8,0 v ".concat(e," a 8,8 0 0,0 16,0 v -").concat(e," a 8,8 0 0,0 -16,0 Z"),className:"rmg-stn__mtr"}),r.createElement("path",{id:"int".concat(t,"_b"),className:"rmg-stn__mtr",d:"M -8,9.68 v ".concat(e," a 8,8 0 0,0 16,0 v -").concat(e," a 8,8 0 0,0 -1.630196235,-4.84 a 8,8 0 1,0 -12.73960758,0 a 8,8 0 0,0 -1.630196235,4.84 Z")}),r.createElement("path",{id:"int".concat(t,"_bb"),className:"rmg-stn__mtr",d:"M -8,19.36 v ".concat(e," a 8,8 0 0,0 16,0 v -").concat(e," a 8,8 0 0,0 -1.630196235,-4.84 a 8,8 0 0,0 0,-9.68 a 8,8 0 1,0 -12.73960758,0 a 8,8 0 0,0 0,9.68 a 8,8 0 0,0 -1.630196235,4.84 Z")}))})),r.createElement("g",{id:"osi11"},r.createElement("path",{d:"M 0,0 V 26"}),r.createElement("use",{xlinkHref:"#stn"}),r.createElement("use",{xlinkHref:"#stn",y:26})),r.createElement("g",{id:"osi11_b"},r.createElement("path",{d:"M 0,0 V 35.68"}),r.createElement("use",{xlinkHref:"#stn_b"}),r.createElement("use",{xlinkHref:"#stn",y:35.68})),r.createElement("g",{id:"osi11_bb"},r.createElement("path",{d:"M 0,0 V 45.36"}),r.createElement("use",{xlinkHref:"#stn_bb"}),r.createElement("use",{xlinkHref:"#stn",y:45.36})),r.createElement("g",{id:"osi12"},r.createElement("path",{d:"M 0,0 V 26"}),r.createElement("use",{xlinkHref:"#stn"}),r.createElement("use",{xlinkHref:"#int2",y:26})),r.createElement("g",{id:"osi12_b"},r.createElement("path",{d:"M 0,11 V 35.68"}),r.createElement("use",{xlinkHref:"#stn_b"}),r.createElement("use",{xlinkHref:"#int2",y:35.68})),r.createElement("g",{id:"osi12_bb"},r.createElement("path",{d:"M 0,11 V 45.36"}),r.createElement("use",{xlinkHref:"#stn_bb"}),r.createElement("use",{xlinkHref:"#int2",y:45.36})),r.createElement("g",{id:"osi22end"},r.createElement("path",{d:"M 0,0 H 41"}),r.createElement("use",{xlinkHref:"#stn"}),r.createElement("use",{xlinkHref:"#int2",x:41,y:-18})),r.createElement("g",{id:"osi22end_b"},r.createElement("path",{d:"M 0,9.68 H 41"}),r.createElement("use",{xlinkHref:"#stn_b"}),r.createElement("use",{xlinkHref:"#int2",x:41,y:-8.32})),r.createElement("path",{id:"inttick",d:"M 0,0 v 17",strokeLinecap:"round"}))})))}}]);
//# sourceMappingURL=railmapMTR.6fcd7514.chunk.js.map