{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","svgs/strip/strip-gzmtr.tsx","svgs/station-num-gzmtr.tsx","svgs/runin/info-gzmtr.tsx","svgs/runin/runin-gzmtr.tsx"],"names":["_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","StripGZMTR","props","stripHeight","variant","indicatorLight","React","cy","r","fill","rx","ry","x","y","height","width","id","style","transform","isShowLight","isShowPSD","PSD","includes","className","fontSize","dy","prevProps","nextProps","StationNumberText","lineNum","stnNum","others","lineNumEl","bBox","setBBox","current","getBBox","lineNumScale","stnNumScale","textAnchor","ref","InfoGZMTR","param","useContext","ParamContext","curStnInfo","stn_list","current_stn_idx","curNameEl","useRef","useState","nameBBox","setNameBBox","useEffect","undefined","name","nextStnId","direction","BigName","curName","svg_height","split","line_num","num","svgWidth","runin","nextId","nextIds","forwardRef","useMemo","map","txt","BigStnNum","d","BigNext","nextBBox","setNextBBox","nextNameEl","nextNameZHCount","nameBcrX","BigNext2","routes","validEnds","stnId","filter","route","s","Set","reverse","Array","from","Math","max","Fragment","j","join","replace","PlatformNum","RunInGZMTR","info_panel_type","psd_num","platform_num","cx"],"mappings":"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","file":"static/js/runinMTR.a719880b.chunk.js","sourcesContent":["import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import * as React from 'react';\n\ninterface Props {\n    variant: 'gz1' | 'gz28' | 'gz3' | 'gz1421' | 'gzgf';\n    isShowLight: boolean;\n    isShowPSD: false | string;\n}\n\nconst StripGZMTR = (props: Props) => {\n    const stripHeight = (variant => {\n        switch (variant) {\n            case 'gz28':\n            case 'gzgf':\n                return 60;\n            case 'gz1':\n            case 'gz3':\n                return 40;\n            case 'gz1421':\n                return 20;\n            default:\n                return 0;\n        }\n    })(props.variant);\n\n    const indicatorLight = React.useMemo(() => {\n        switch (props.variant) {\n            case 'gz1':\n                return <circle cy={-28} r={16} fill=\"red\" />;\n            case 'gz28':\n                return <ellipse rx={24} ry={12} fill=\"orange\" />;\n            case 'gz3':\n                return <rect x={-15} y={-25} height={30} width={30} fill=\"red\" />;\n            case 'gzgf':\n                return <ellipse rx={24} ry={12} fill=\"white\" />;\n            case 'gz1421':\n                return <ellipse cy={-8} rx={24} ry={12} fill=\"orange\" />;\n            default:\n                return <></>;\n        }\n    }, [props.variant]);\n\n    return (\n        <g>\n            <rect\n                id=\"strip_gz\"\n                style={{\n                    ['--height' as any]: `${stripHeight}px`,\n                }}\n            />\n            <g\n                style={{\n                    transform: 'translate(calc(var(--rmg-svg-width) / 2),calc(var(--rmg-svg-height) - 30px))',\n                }}\n            >\n                {props.isShowLight && indicatorLight}\n            </g>\n            {props.isShowPSD && <PSD {...props} />}\n        </g>\n    );\n};\n\nexport default StripGZMTR;\n\nconst PSD = React.memo(\n    (props: Props) => (\n        <g\n            id=\"big_psd\"\n            fill={['gz3', 'gz1421', 'gz1'].includes(props.variant) ? 'var(--rmg-theme-fg)' : '#000'}\n            style={{\n                ['--psd-dy' as any]: ['gz1', 'gz3'].includes(props.variant)\n                    ? '82px'\n                    : props.variant === 'gz1421'\n                    ? '62px'\n                    : '58px',\n            }}\n        >\n            <rect\n                height={40}\n                width={40}\n                rx={4}\n                x={-20}\n                fill={['gz3', 'gz1421', 'gz1'].includes(props.variant) ? 'var(--rmg-theme-colour)' : '#fff'}\n            />\n            <text className=\"rmg-name__en\" fontSize={20} dy={12}>\n                {props.isShowPSD}\n            </text>\n            <text className=\"rmg-name__zh\" fontSize={12} dy={26}>\n                屏蔽门\n            </text>\n            <text className=\"rmg-name__en\" fontSize={6.5} dy={36}>\n                Screen Door\n            </text>\n        </g>\n    ),\n    (prevProps, nextProps) => prevProps.variant === nextProps.variant && prevProps.isShowPSD === nextProps.isShowPSD\n);\n","import * as React from 'react';\n\nconst StationNumberText = (props: { lineNum: string; stnNum: string } & React.SVGProps<SVGGElement>) => {\n    const { lineNum, stnNum, ...others } = props;\n\n    const LINE_NUM_MAX_WIDTH = 15.03125;\n\n    const lineNumEl = React.useRef<SVGTextElement | null>(null);\n    const [bBox, setBBox] = React.useState({ width: LINE_NUM_MAX_WIDTH } as DOMRect);\n    React.useEffect(() => {\n        if (lineNumEl.current) setBBox(lineNumEl.current.getBBox());\n    }, [lineNum]);\n\n    const lineNumScale = bBox.width > LINE_NUM_MAX_WIDTH ? LINE_NUM_MAX_WIDTH / bBox.width : 1;\n    const stnNumScale = lineNum.length === 2 ? lineNumScale : 1;\n\n    return (\n        <g textAnchor=\"middle\" fontSize={13.5} {...others}>\n            {React.useMemo(\n                () => (\n                    <>\n                        <g transform={`translate(-9.25,0)scale(${lineNumScale})`}>\n                            <text ref={lineNumEl} className=\"rmg-name__zh\">\n                                {lineNum}\n                            </text>\n                        </g>\n                        <g transform={`translate(9.25,0)scale(${stnNumScale})`}>\n                            <text className=\"rmg-name__zh\">{stnNum}</text>\n                        </g>\n                    </>\n                ),\n                [bBox.width, lineNum, stnNum]\n            )}\n        </g>\n    );\n};\n\nexport default StationNumberText;\n","import React, { useState, useEffect } from 'react';\nimport { ParamContext } from '../../context';\nimport StationNumberText from '../station-num-gzmtr';\n\nconst InfoGZMTR = () => {\n    const { param } = React.useContext(ParamContext);\n    const curStnInfo = param.stn_list[param.current_stn_idx];\n\n    const curNameEl = React.useRef<SVGGElement | null>(null);\n    const [nameBBox, setNameBBox] = useState({ width: 0 } as DOMRect);\n    useEffect(() => (curNameEl.current ? setNameBBox(curNameEl.current.getBBox()) : undefined), [\n        curStnInfo.name[0],\n        curStnInfo.name[1],\n    ]);\n\n    const nextStnId = curStnInfo[param.direction === 'l' ? 'parents' : 'children'];\n\n    return (\n        <g>\n            <BigName\n                ref={curNameEl}\n                curName={curStnInfo.name}\n                style={{\n                    ['--translate-y' as any]: `${0.5 * param.svg_height -\n                        50 -\n                        (curStnInfo.name[1].split('\\\\').length - 1) * 18}px`,\n                }}\n            />\n\n            <BigStnNum\n                lineNum={param.line_num}\n                stnNum={curStnInfo.num}\n                style={{\n                    ['--translate-x' as any]: `${(param.svgWidth.runin + nameBBox.width) / 2 + 55}px`,\n                    ['--translate-y' as any]: `${0.5 * param.svg_height -\n                        30 -\n                        (curStnInfo.name[1].split('\\\\').length - 1) * 18}px`,\n                }}\n            />\n\n            {nextStnId.includes('linestart') || nextStnId.includes('lineend') ? (\n                <></>\n            ) : nextStnId.length === 1 ? (\n                <BigNext nextId={nextStnId[0]} nameBBox={nameBBox} />\n            ) : (\n                <BigNext2 nextIds={nextStnId} nameBBox={nameBBox} />\n            )}\n        </g>\n    );\n};\n\nexport default InfoGZMTR;\n\nconst BigName = React.forwardRef(\n    (props: { curName: Name } & React.SVGProps<SVGGElement>, ref: React.Ref<SVGGElement>) => {\n        const { curName, ...others } = props;\n\n        return (\n            <g id=\"big_name\" ref={ref} {...others}>\n                {React.useMemo(\n                    () => (\n                        <>\n                            <text className=\"rmg-name__zh\" fontSize={90}>\n                                {curName[0]}\n                            </text>\n                            <g fontSize={36} className=\"rmg-name__en\">\n                                {curName[1].split('\\\\').map((txt, i) => (\n                                    <text key={i} dy={70 + i * 36}>\n                                        {txt}\n                                    </text>\n                                ))}\n                            </g>\n                        </>\n                    ),\n                    [curName]\n                )}\n            </g>\n        );\n    }\n);\n\nconst BigStnNum = (props: { lineNum: string; stnNum: string } & React.SVGProps<SVGGElement>) => {\n    const { lineNum, stnNum, ...others } = props;\n\n    return (\n        <g id=\"big_stn_num\" {...others}>\n            {React.useMemo(\n                () => (\n                    <>\n                        <path\n                            className=\"rmg-stn rmg-stn--future\"\n                            d=\"M 0,12.95 V -12.95 H -12.95 a 12.95,12.95 0 0,0 0,25.9 h 25.9 a 12.95,12.95 0 0,0 0,-25.9 H 0 \"\n                        />\n                        <StationNumberText transform=\"scale(1.4)\" {...{ lineNum, stnNum }} />\n                    </>\n                ),\n                [lineNum, stnNum]\n            )}\n        </g>\n    );\n};\n\nconst BigNext = (props: { nextId: string; nameBBox: DOMRect }) => {\n    const { param } = React.useContext(ParamContext);\n\n    const [nextBBox, setNextBBox] = useState({ width: 0 } as DOMRect);\n    const nextNameEl = React.useRef<SVGGElement | null>(null);\n    useEffect(() => (nextNameEl.current ? setNextBBox(nextNameEl.current.getBBox()) : undefined), []);\n\n    const nextNameZHCount = param.stn_list[props.nextId].name[0].length;\n    const nameBcrX = (param.svgWidth.runin - props.nameBBox.width) / 2;\n\n    return (\n        <>\n            <g id=\"big_next\">\n                <g\n                    textAnchor=\"middle\"\n                    style={{\n                        ['--translate-x' as any]:\n                            param.direction === 'l'\n                                ? '80px'\n                                : nextNameZHCount <= 2\n                                ? `${param.svgWidth.runin - 45 - nextBBox.width - 70}px`\n                                : `${param.svgWidth.runin - 45 - nextBBox.width - 35 * 1.5}px`,\n                    }}\n                >\n                    <text className=\"rmg-name__zh\">下站</text>\n                    <text className=\"rmg-name__en\" dy={30}>\n                        Next\n                    </text>\n                </g>\n                <g\n                    textAnchor=\"start\"\n                    ref={nextNameEl}\n                    style={{\n                        ['--translate-x' as any]:\n                            param.direction === 'l'\n                                ? nextNameZHCount <= 2\n                                    ? `${115 + 35}px`\n                                    : `${115 + 35 / 2}px`\n                                : `${param.svgWidth.runin - 45 - nextBBox.width}px`,\n                    }}\n                >\n                    <text className=\"rmg-name__zh\">{param.stn_list[props.nextId].name[0]}</text>\n                    {param.stn_list[props.nextId].name[1].split('\\\\').map((txt: string, i: number) => (\n                        <text className=\"rmg-name__en\" dy={30 + i * 17} key={i}>\n                            {txt}\n                        </text>\n                    ))}\n                </g>\n            </g>\n            <path\n                id=\"arrow\"\n                d=\"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z\"\n                fill=\"black\"\n                style={{\n                    ['--translate-x' as any]:\n                        param.direction === 'l'\n                            ? `${(115 + 35 * ((nextNameZHCount <= 2 ? 1 : 0.5) + nextNameZHCount) + nameBcrX) / 2 -\n                                  20}px`\n                            : `${(param.svgWidth.runin -\n                                  45 -\n                                  nextBBox.width -\n                                  (nextNameZHCount <= 2 ? 70 + 35 : 35 * 2.5) +\n                                  nameBcrX +\n                                  props.nameBBox.width +\n                                  55 +\n                                  18.5 * 1.4) /\n                                  2 +\n                                  20}px`,\n                    ['--rotate' as any]: param.direction === 'l' ? '0deg' : '180deg',\n                }}\n            />\n        </>\n    );\n};\n\nconst BigNext2 = (props: { nextIds: string[]; nameBBox: DOMRect }) => {\n    const { param, routes } = React.useContext(ParamContext);\n\n    const [nextBBox, setNextBBox] = useState({ width: 0 } as DOMRect);\n\n    const validRoutes = props.nextIds.map(stnId =>\n        routes\n            .filter(route => route.indexOf(stnId) !== -1)\n            .map(route => route.filter(s => !['linestart', 'lineend'].includes(s)))\n    );\n    const validEnds = validRoutes.map(routes => {\n        if (param.direction === 'l') {\n            return [...new Set(routes.map(route => route[0]))].reverse();\n        } else {\n            return Array.from(new Set(routes.map(route => route.reverse()[0])));\n        }\n    });\n\n    const nextNameZHCount = Math.max(...props.nextIds.map(id => param.stn_list[id].name[0].length));\n    const nameBcrX = (param.svgWidth.runin - props.nameBBox.width) / 2;\n\n    return (\n        <>\n            <g id=\"big_next_2\">\n                {props.nextIds.map((stnId, i) => {\n                    // const nextNameEl = React.createRef<SVGGElement>();\n                    // useEffect(\n                    //     () =>\n                    //         setNextBBox(prevBBox => {\n                    //             let nextBBox = nextNameEl.current.getBBox();\n                    //             return prevBBox.width > nextBBox.width ? prevBBox : nextBBox;\n                    //         }),\n                    //     []\n                    // );\n\n                    return (\n                        <React.Fragment key={i}>\n                            <g\n                                textAnchor=\"middle\"\n                                style={{\n                                    ['--translate-x' as any]:\n                                        param.direction === 'l'\n                                            ? '72px'\n                                            : `${param.svgWidth.runin - 45 - nextBBox.width - 41}px`,\n                                }}\n                            >\n                                <text className=\"rmg-name__zh\">下站</text>\n                                <text className=\"rmg-name__en\" y={22}>\n                                    Next\n                                </text>\n                            </g>\n                            <g\n                                // ref={nextNameEl}\n                                textAnchor=\"start\"\n                                style={{\n                                    ['--translate-x' as any]:\n                                        param.direction === 'l'\n                                            ? '113px'\n                                            : `${param.svgWidth.runin - 45 - nextBBox.width}px`,\n                                }}\n                            >\n                                <text className=\"rmg-name__zh\">{param.stn_list[stnId].name[0]}</text>\n                                {param.stn_list[stnId].name[1].split('\\\\').map((txt, j) => (\n                                    <text key={j} className=\"rmg-name__en\" y={22 + j * 13}>\n                                        {txt}\n                                    </text>\n                                ))}\n                                <text className=\"rmg-name__zh\" y={-35}>\n                                    {validEnds[i].map(s => param.stn_list[s].name[0]).join('/') + '方向'}\n                                </text>\n                                <text className=\"rmg-name__en rmg-name__gzmtr--next2-dest\" y={-20}>\n                                    {'Towards ' +\n                                        validEnds[i]\n                                            .map(s => param.stn_list[s].name[1])\n                                            .join('/')\n                                            .replace('\\\\', ' ')}\n                                </text>\n                            </g>\n                        </React.Fragment>\n                    );\n                })}\n            </g>\n            <path\n                id=\"arrow\"\n                d=\"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z\"\n                fill=\"black\"\n                style={{\n                    ['--translate-x' as any]:\n                        param.direction === 'l'\n                            ? `${(99 + 27 * (1 + nextNameZHCount) + nameBcrX) / 2 - 20}px`\n                            : `${(param.svgWidth.runin -\n                                  45 -\n                                  nextBBox.width -\n                                  41 -\n                                  27 +\n                                  nameBcrX +\n                                  props.nameBBox.width +\n                                  55 +\n                                  18.5 * 1.4) /\n                                  2 +\n                                  20}px`,\n                    ['--rotate' as any]: param.direction === 'l' ? '0deg' : '180deg',\n                }}\n            />\n        </>\n    );\n};\n","import * as React from 'react';\n\nimport { ParamContext } from '../../context';\nimport StripGZMTR from '../strip/strip-gzmtr';\nimport InfoGZMTR from './info-gzmtr';\n\nconst RunInGZMTR = () => {\n    const { param } = React.useContext(ParamContext);\n    return (\n        <>\n            <StripGZMTR variant={param.info_panel_type} isShowLight={true} isShowPSD={param.psd_num} />\n\n            <PlatformNum\n                num={param.platform_num}\n                style={{\n                    ['--translate-x' as any]: `${param.direction === 'l' ? param.svgWidth.runin - 100 : 100}px`,\n                }}\n            />\n\n            <InfoGZMTR />\n        </>\n    );\n};\n\nexport default RunInGZMTR;\n\nconst PlatformNum = (props: { num: string } & React.SVGProps<SVGGElement>) => {\n    const { num, ...others } = props;\n\n    return (\n        <g id=\"platform\" {...others}>\n            {React.useMemo(\n                () => (\n                    <>\n                        <circle cx={0} cy={0} r={30} fill=\"var(--rmg-theme-colour)\" />\n                        <text className=\"rmg-name__en\" fontSize={38} dy={-9.5}>\n                            {num}\n                        </text>\n                        <text className=\"rmg-name__zh\" fontSize={13} dy={10}>\n                            站台\n                        </text>\n                        <text className=\"rmg-name__en\" fontSize={9} dy={21}>\n                            Platform\n                        </text>\n                    </>\n                ),\n                [num]\n            )}\n        </g>\n    );\n};\n"],"sourceRoot":""}